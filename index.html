<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Home</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Home</h1>

    



    


    <h3> </h3>










    




    <section>
        <article><h2>File structure</h2>
<p>The installation has subdirectories as follows:</p>
<ul>
<li><code>audio</code> contains audio samples</li>
<li><code>css</code> contains style sheets
<ul>
<li><code>css/default</code> contains the default theme. Other subdirectories
contain files that can override all or some of the default css.</li>
</ul>
</li>
<li><code>dictionaries</code> contains all the dictionaries</li>
<li><code>editions</code> contains the edition specifications</li>
<li><code>games</code> contains the database of games (initially empty)</li>
<li><code>html</code> has the html for the user interfaces, <code>games_ui.html</code> for the control panel, and <code>game_ui.html</code> for the game itself.</li>
<li><code>i18n</code> contains the master English <code>en.json</code>, qqq documentation, and any other contributed translations of the interface.</li>
<li><code>images</code> contains images used by the game</li>
<li><code>js</code> has all the source code
<ul>
<li><code>js/common</code> has generic code</li>
<li><code>js/dawg</code> is generation and management of DAWGs</li>
<li><code>js/design</code> is the Valett program</li>
<li><code>js/game</code> has basic game code shared between frontend and backend</li>
<li><code>js/backend</code> has game code specific to the backend</li>
<li><code>js/i18n</code> has the translations checker</li>
<li><code>js/browser</code> has browser-specific code</li>
<li><code>js/client</code> has the client code</li>
<li><code>js/server</code> has the server code</li>
<li><code>js/standalone</code> has the code that runs entirely in the browser</li>
<li><code>js/build</code> has build system components</li>
</ul>
</li>
<li><code>test</code> has all the unit tests and fixtures</li>
<li><code>bin</code> has top level scripts</li>
</ul>
<h2>Creating your own dictionary</h2>
<p>Dictionaries are stored in the <code>dictionaries</code> directory in the form of
a DAWG (Directed Acyclic Word Graph), which is generated from a
lexicon (list of words) using a processor based on <a href="https://github.com/danielweck/scrabble-html-ui">Daniel Weck's
DAWG_Compressor program</a>. To build a new dictionary, follow the
instructions given when you run:</p>
<pre class="prettyprint source"><code>$ node bin/dictionary_compressor.js
</code></pre>
<p><code>bin/explore.js</code> can be used to explore the generated DAWG(s) e.g.</p>
<pre class="prettyprint source"><code>$ node bin/explore.js SOWPODS_English --anagrams scrabble
</code></pre>
<p>Run it with no parameters for help.</p>
<p>If you are extending an existing dictionary with new words, you don't
need to run the compressor. If there is a file in the <code>dictionaries</code>
folder with the same name as the dictionary and the extension <code>.white</code>
it will be read and the words in it loaded into the dictionary when
the server starts. It will affect the performance of the dictionary,
so you are recommended to run the compressor every so often to
incorporate those words.</p>
<p>If you create a new dictionary, you will have to add it to
<code>dictionaries/index.json</code> for the standalone game to pick it up.</p>
<h2>Flow of Control</h2>
<p>Players access <code>/</code> on the server. This will load the <code>games_ui</code>
interface, which is used to view available games and create new games.</p>
<p>A game is joined by opening a URL which identifies the game
and player (<code>GET /join/gameKey/playerKey</code>). The server adds the
player to the game and responds with the gameKey and playerKey. The
<code>games</code> interface then opens a new window on <code>html/game_ui.html</code>, which
loads the UI.</p>
<p>Construction of the UI object asks the server for the state of the
game using a <code>GET /game/gameKey</code> URI. The server recognises this as a
request for JSON, and serves up the game, as serialised by
<code>js/game/Freeze.js</code>.  The UI thaws this data and loads the game, then
manually connects the <code>WebSocket</code>, attaching handlers for managing the
socket.</p>
<p>Once construction is complete, the UI will listen for events coming
over the socket from the server and modify the client local copy of
the game accordingly. It will also listen for events coming from the
user, and will POST messages using the <code>/command</code> route to reflect
user actions: <code>makeMove</code>, <code>challenge</code>, <code>swap</code>, <code>takeBack</code>, <code>pass</code>,
<code>confirmGameOver</code>, <code>pause</code> and <code>unpause</code>.</p>
<p>Information about a play is passed to the server in a <code>Move</code> object,
and results are broadcast asynchronously as <code>turn</code> events
parameterised by <code>Turn</code> objects. A single play will usually result in
a single <code>Turn</code> object being broadcast, but there is no theoretical
limit on the number of <code>Turn</code> objects that might be broadcast for a
single interactive play. For example, a robot play following a human
play will result in a sequence of turns. <code>Turn</code> objects are recorded
in the game history, allowing a full replay of game events at a later
date (e.g. when refreshing the Ui.)</p>
<p>A complete list of the routes handled by the server can be found in
the code documentation for the <code>Server</code> class.</p>
<h2>Testing</h2>
<p>The <code>test</code> subdirectory contains unit tests for the server
written using the <a href="https://mochajs.org/">mocha</a> framework. Run them using <code>npm run test</code>.</p>
<p>Also supported is test coverage analysis using <a href="https://istanbul.js.org/">istanbul</a>; run
<code>npm run coverage</code>.
Coverage statistics are outout in the <code>coverage</code> directory.</p>
<p>You can also run <a href="https://eslint.org/">eslint</a> on the code using <code>npm run lint</code>.</p>
<p>There's a <code>npm run debug</code> script to run the server with debug options enabled (very verbose).</p>
<p>The client UI supports a mechanical turk for UI testing. This can be enabled by passing <code>autoplay</code> in the URL parameters to an open game. Once a first manual play has been played, all subsequent plays in that UI will be decided automatically.</p>
<h2>Internationalisation</h2>
<p>Xanado uses the <a href="https://github.com/wikimedia/jquery.i18n">Wikimedia jQuery.i18n framework</a> to support translations. Currently translation files are provided for English, (une très mauvaise traduction en) French, and (eine schlechte Übersetzung ins) German. To generate your own translation, copy <code>/i18n/en.json</code> to a file using your language code (e.g. <code>it</code> for Italian) and edit the new file to provide the translation. You can use <code>npm run tx</code> to check the completeness of your translations.</p>
<p>If you create a new translation, you will have to add it to
<code>i18n/index.json</code> for the standalone game to pick it up.</p>
<h2>Theming the UI</h2>
<p>Support for theming the UI exists at two levels.</p>
<ul>
<li>To theme the look of the jQuery components of the UI, you can add a (jQuery UI theme)[https://api.jqueryui.com/category/theming/] to <code>html/game_ui.html</code>.</li>
<li>To theme the more Xanado specific classes, you can override the css files in <code>css/default</code> by providing your own versions of the files. An example is given in <code>css/exander77</code>. All files must be provided.</li>
</ul>
<h2>Build system</h2>
<p>The build system is used to generate minimal browser scripts and CSS in the <code>dist</code> subdirectory. Run it using <code>npm run dist</code>. The <code>dist</code> code can be used to run a single player game using scripts hosted a standard HTTP server that does not have server-side scripting. The <code>dist</code> code is checked in to git so that it can be served using github pages.</p>
<h2>Documentation</h2>
<p>The code is documented using <code>jsdoc</code>. The documentation is automatically
built when a new version is pushed to github, and can be found on <a href="https://cdot.github.io/Xanado/">github pages</a>.</p>
<p>For development, <code>npm run doc</code> will generate the documentation in the <code>doc</code>
directory.
You can read the doc in a browser by opening <code>file:///..../doc/index.html</code>
or, if the game server is running, by loading <code>http://localhost:9093/doc/index.html</code> (adjust URL to suit your install)</p>
<h2>Docker</h2>
<p><code>Dockerfile</code> can be used for building local docker images (assuming you have
a docker server running).</p>
<pre class="prettyprint source"><code>npm run docker
</code></pre>
<p>will build an image using <code>Dockerfile</code></p>
<pre class="prettyprint source"><code>$ docker run -p9093:9093 xword
</code></pre>
<p>will run the image, mapping <code>localhost</code> port 9093 to port 9093 on the docker image. The docker image is automatically built when a new version is checked in
to github.</p>
<h2>Ideas</h2>
<p>The github repository has a list of issues that need to be addressed, including
a number of enhancements. Here are some other enhancements that you might like
to explore.</p>
<h3>Designing your own game</h3>
<p>Game definitions can be found in the <code>editions</code> directory. Each
definition describes the layout of the lower-right quadrant of the
board (it is assumed to be mirrored), the contents of the bag, the
number of tiles on the rack, the number of tiles that can be swapped
in a play, and the bonuses for playing certain numbers of tiles in one
play.</p>
<p>If you create a new edition, you will have to add it to
<code>editions/index.json</code> for the standalone game to pick it up.</p>
<h3>Valett</h3>
<p>Choosing point values for tiles, and the number of tiles of each letter,
can be difficult to get right. Included is a version of
<a href="https://github.com/jmlewis/valett">Joshua Lewis' Valett program</a>
which analyses a word corpus and recommends tile values and counts for the
letter combinations encountered in the corpus based on probability (the corpus
can be any big list of words, or it can simply be a lexicon). Run the program
<code>node bin/valett.js</code> for help.</p>
<h3>DAWG</h3>
<p>The DAWG support is designed to be reusable in other games. It might be fun to implement Wordle, for example, or the word search game often found in newspapers where you try to make as many words as possible from a 9 letter anagram. The <code>js/dawg/explore.js</code> program is a basic command-line tool for exploring a DAWG.</p>
<h3>Public Server</h3>
<p>It would be nice to see a truly public server that anyone could sign in to and play against other random people. However this would have to be done with great care.</p>
<ul>
<li>there are already a number of security features, such as simple XSS avoidance (thanks to @pkolano) and use of HTTPS, but it has some potential holes that might be exploited by an evil person. An audit is required.</li>
<li>would also have to address things like the size and performance of the database, and the performance of the robot.</li>
<li>the games interface would be unusable without some sort of grouping of users and/or games - for example, into &quot;rooms&quot;.</li>
</ul></article>
    </section>






</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="BackendGame.html">BackendGame</a></li><li><a href="Board.html">Board</a></li><li><a href="BrowserBoard.html">BrowserBoard</a></li><li><a href="BrowserDatabase.html">BrowserDatabase</a></li><li><a href="BrowserGame.html">BrowserGame</a></li><li><a href="BrowserPlatform.html">BrowserPlatform</a></li><li><a href="BrowserPlayer.html">BrowserPlayer</a></li><li><a href="BrowserRack.html">BrowserRack</a></li><li><a href="BrowserTile.html">BrowserTile</a></li><li><a href="Channel.html">Channel</a></li><li><a href="ClientGamesUI.html">ClientGamesUI</a></li><li><a href="ClientGameUI.html">ClientGameUI</a></li><li><a href="Compressor.html">Compressor</a></li><li><a href="Configurator.html">Configurator</a></li><li><a href="Dialog.html">Dialog</a></li><li><a href="Dictionary.html">Dictionary</a></li><li><a href="Edition.html">Edition</a></li><li><a href="Explorer.html">Explorer</a></li><li><a href="FileDatabase.html">FileDatabase</a></li><li><a href="Fridge.html">Fridge</a></li><li><a href="Game.html">Game</a></li><li><a href="GameDialog.html">GameDialog</a></li><li><a href="GameSetupDialog.html">GameSetupDialog</a></li><li><a href="InvitePlayersDialog.html">InvitePlayersDialog</a></li><li><a href="JSAnalyser.html">JSAnalyser</a></li><li><a href="LetterBag.html">LetterBag</a></li><li><a href="LetterNode.html">LetterNode</a></li><li><a href="LoginDialog.html">LoginDialog</a></li><li><a href="Move.html">Move</a></li><li><a href="Player.html">Player</a></li><li><a href="Rack.html">Rack</a></li><li><a href="Server.html">Server</a></li><li><a href="ServerPlatform.html">ServerPlatform</a></li><li><a href="Square.html">Square</a></li><li><a href="StandaloneGamesUI.html">StandaloneGamesUI</a></li><li><a href="StandaloneGameUI.html">StandaloneGameUI</a></li><li><a href="Surface.html">Surface</a></li><li><a href="Tile.html">Tile</a></li><li><a href="Trie.html">Trie</a></li><li><a href="TrieNode.html">TrieNode</a></li><li><a href="Turn.html">Turn</a></li><li><a href="UI.html">UI</a></li><li><a href="UserManager.html">UserManager</a></li><li><a href="XanadoPass.html">XanadoPass</a></li></ul><h3>Interfaces</h3><ul><li><a href="Database.html">Database</a></li><li><a href="Platform.html">Platform</a></li></ul><h3>Mixins</h3><ul><li><a href="browser_GamesUIMixin.html">browser/GamesUIMixin</a></li><li><a href="browser_GameUIMixin.html">browser/GameUIMixin</a></li><li><a href="browser_SquareMixin.html">browser/SquareMixin</a></li><li><a href="browser_SurfaceMixin.html">browser/SurfaceMixin</a></li><li><a href="client_ClientUIMixin.html">client/ClientUIMixin</a></li><li><a href="client_PasswordMixin.html">client/PasswordMixin</a></li><li><a href="game_Commands.html">game/Commands</a></li><li><a href="game_Replay.html">game/Replay</a></li><li><a href="game_Undo.html">game/Undo</a></li><li><a href="standalone_StandaloneUIMixin.html">standalone/StandaloneUIMixin</a></li></ul><h3>Global</h3><ul><li><a href="global.html#backend/findBestPlay">backend/findBestPlay</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Wed Nov 30 2022 13:52:05 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>